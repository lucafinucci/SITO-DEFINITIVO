â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                  FLUSSO UPLOAD E DOWNLOAD FILE - ARUBA                       â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FASE 1: CLIENTE CARICA FILE                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    ğŸ‘¤ CLIENTE (Browser)
    â”‚
    â”‚  Visita: finch-ai.it/area-clienti/richiedi-addestramento.php
    â”‚
    â”œâ”€â–º ğŸ“„ Seleziona 5 file PDF (fatture)
    â”‚
    â”œâ”€â–º ğŸ–±ï¸  Drag & drop nella zona upload
    â”‚
    â””â”€â–º âœ‰ï¸  Click "Invia Richiesta"
         â”‚
         â”‚  AJAX POST con FormData
         â”‚
         â–¼

    ğŸŒ INTERNET
         â”‚
         â”‚  HTTPS
         â”‚
         â–¼

    ğŸ–¥ï¸  SERVER ARUBA
         â”‚
         â”‚  Riceve richiesta su:
         â”‚  /area-clienti/api/upload-training.php
         â”‚
         â”œâ”€â–º âœ… Verifica autenticazione (sessione)
         â”œâ”€â–º âœ… Valida CSRF token
         â”œâ”€â–º âœ… Controlla tipo file (PDF/PNG/JPG)
         â”œâ”€â–º âœ… Verifica dimensione (< 10MB)
         â”‚
         â–¼

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FASE 2: SALVATAGGIO SU DISCO                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    ğŸ“‚ FILE SYSTEM ARUBA
         â”‚
         â”‚  /home/tuoutente/
         â”‚
         â”œâ”€â–º public_html/               â† Sito web (PUBBLICO)
         â”‚   â”œâ”€â”€ index.html
         â”‚   â”œâ”€â”€ area-clienti/
         â”‚   â”‚   â”œâ”€â”€ login.php
         â”‚   â”‚   â””â”€â”€ api/
         â”‚   â”‚       â””â”€â”€ upload-training.php  â† Script ricevente
         â”‚   â””â”€â”€ ...
         â”‚
         â””â”€â–º uploads/                   â† âš ï¸ FUORI public_html (PRIVATO)
             â””â”€â”€ training/              â† File clienti
                 â””â”€â”€ 1/                 â† ID Richiesta
                     â”œâ”€â”€ 67a3b2c1_fattura1.pdf  âœ… SALVATO
                     â”œâ”€â”€ 67a3b2c2_fattura2.pdf  âœ… SALVATO
                     â”œâ”€â”€ 67a3b2c3_fattura3.pdf  âœ… SALVATO
                     â”œâ”€â”€ 67a3b2c4_fattura4.pdf  âœ… SALVATO
                     â””â”€â”€ 67a3b2c5_fattura5.pdf  âœ… SALVATO

    ğŸ’¾ DATABASE MySQL
         â”‚
         â”‚  Tabella: richieste_addestramento
         â”‚  â”œâ”€â–º INSERT richiesta (ID=1, tipo, descrizione, cliente)
         â”‚
         â”‚  Tabella: richieste_addestramento_files
         â”‚  â”œâ”€â–º INSERT file 1 (nome_originale, path, size)
         â”‚  â”œâ”€â–º INSERT file 2
         â”‚  â”œâ”€â–º INSERT file 3
         â”‚  â”œâ”€â–º INSERT file 4
         â”‚  â””â”€â–º INSERT file 5

    âœ‰ï¸  EMAIL (opzionale)
         â”‚
         â””â”€â–º Invia a: ai-training@finch-ai.it
             Oggetto: "Nuova richiesta da Azienda Demo Srl"
             Corpo: Dettagli + lista file

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FASE 3: ADMIN SCARICA FILE (3 METODI)                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â”‚ METODO 1: FTP con FileZilla                                 â­ RACCOMANDATO â”‚
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    ğŸ’» TUO PC
    â”‚
    â”‚  Apri FileZilla
    â”‚
    â”œâ”€â–º Host: ftp.tuosito.it
    â”œâ”€â–º User: tuoutente
    â”œâ”€â–º Pass: ********
    â”‚
    â””â”€â–º Click "Connetti"
         â”‚
         â–¼

    ğŸŒ CONNESSIONE FTP
         â”‚
         â–¼

    ğŸ–¥ï¸  SERVER ARUBA
         â”‚
         â”‚  Navighi a: /uploads/training/
         â”‚
         â”œâ”€â–º Vedi cartelle:
         â”‚   â”œâ”€â”€ 1/  â† Click qui
         â”‚   â”œâ”€â”€ 2/
         â”‚   â””â”€â”€ 3/
         â”‚
         â””â”€â–º Dentro cartella 1/:
             â”œâ”€â”€ 67a3b2c1_fattura1.pdf
             â”œâ”€â”€ 67a3b2c2_fattura2.pdf
             â”œâ”€â”€ 67a3b2c3_fattura3.pdf
             â”œâ”€â”€ 67a3b2c4_fattura4.pdf
             â””â”€â”€ 67a3b2c5_fattura5.pdf
                  â”‚
                  â”‚  Click destro â†’ Download
                  â”‚  Oppure: Trascina su tuo PC
                  â”‚
                  â–¼

    ğŸ’¾ DOWNLOAD COMPLETATO
         â”‚
         â””â”€â–º File salvati sul tuo PC come:
             C:\Downloads\fattura1.pdf  âœ…
             C:\Downloads\fattura2.pdf  âœ…
             C:\Downloads\fattura3.pdf  âœ…
             C:\Downloads\fattura4.pdf  âœ…
             C:\Downloads\fattura5.pdf  âœ…

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â”‚ METODO 2: File Manager Aruba (Web)                                          â”‚
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    ğŸ’» BROWSER
    â”‚
    â”‚  Visita: aruba.it
    â”‚
    â”œâ”€â–º Login pannello
    â”‚
    â””â”€â–º Vai su: File Manager
         â”‚
         â–¼

    ğŸ–¥ï¸  PANNELLO ARUBA
         â”‚
         â”‚  Navighi a: uploads/training/1/
         â”‚
         â”œâ”€â–º Vedi file:
         â”‚   â”œâ”€â”€ 67a3b2c1_fattura1.pdf
         â”‚   â”œâ”€â”€ 67a3b2c2_fattura2.pdf
         â”‚   â”œâ”€â”€ 67a3b2c3_fattura3.pdf
         â”‚   â”œâ”€â”€ 67a3b2c4_fattura4.pdf
         â”‚   â””â”€â”€ 67a3b2c5_fattura5.pdf
         â”‚
         â””â”€â–º Seleziona tutti â†’ "Scarica come ZIP"
              â”‚
              â–¼

    ğŸ“¦ DOWNLOAD ZIP
         â”‚
         â””â”€â–º training_1.zip (1.2 MB)
             â”œâ”€â”€ fattura1.pdf  âœ…
             â”œâ”€â”€ fattura2.pdf  âœ…
             â”œâ”€â”€ fattura3.pdf  âœ…
             â”œâ”€â”€ fattura4.pdf  âœ…
             â””â”€â”€ fattura5.pdf  âœ…

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â”‚ METODO 3: Pannello Admin Sito                               â­ CONSIGLIATO â”‚
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    ğŸ’» BROWSER
    â”‚
    â”‚  Visita: finch-ai.it/area-clienti/admin/richieste-addestramento.php
    â”‚
    â”œâ”€â–º Login come admin
    â”‚
    â””â”€â–º Vedi dashboard:
         â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ ğŸ“Š STATISTICHE                                     â”‚
         â”‚ â”œâ”€ In Attesa: 2                                    â”‚
         â”‚ â”œâ”€ In Lavorazione: 1                               â”‚
         â”‚ â””â”€ Totale: 5                                       â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ ğŸ“‹ Richiesta #1                  ğŸŸ¡ In Attesa     â”‚
         â”‚                                                    â”‚
         â”‚ ğŸ‘¤ Cliente: Mario Rossi - Azienda Demo Srl        â”‚
         â”‚ ğŸ“§ mario@demo.it                                   â”‚
         â”‚                                                    â”‚
         â”‚ ğŸ“ Tipo: Fatture Elettroniche                      â”‚
         â”‚ ğŸ“Š Documenti: 50                                   â”‚
         â”‚ ğŸ“„ File caricati: 5 file                           â”‚
         â”‚                                                    â”‚
         â”‚ ğŸ“„ File:                                           â”‚
         â”‚ â”œâ”€ fattura1.pdf (240 KB)  [â¬‡ï¸ Download]          â”‚
         â”‚ â”œâ”€ fattura2.pdf (194 KB)  [â¬‡ï¸ Download]          â”‚
         â”‚ â”œâ”€ fattura3.pdf (312 KB)  [â¬‡ï¸ Download]          â”‚
         â”‚ â”œâ”€ fattura4.pdf (278 KB)  [â¬‡ï¸ Download]          â”‚
         â”‚ â””â”€ fattura5.pdf (189 KB)  [â¬‡ï¸ Download]          â”‚
         â”‚                                                    â”‚
         â”‚ [ğŸ“¦ Scarica Tutti (ZIP)]  [â–¶ï¸ Inizia Lavorazione]â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â”‚  Click "ğŸ“¦ Scarica Tutti (ZIP)"
                  â”‚
                  â–¼

    ğŸ–¥ï¸  API BACKEND
         â”‚
         â”‚  /api/download-training-files.php?richiesta_id=1
         â”‚
         â”œâ”€â–º âœ… Verifica autenticazione
         â”œâ”€â–º âœ… Verifica ruolo admin
         â”œâ”€â–º ğŸ“‚ Legge file da: /uploads/training/1/
         â”œâ”€â–º ğŸ“¦ Crea ZIP temporaneo
         â”‚       â”œâ”€â”€ fattura1.pdf
         â”‚       â”œâ”€â”€ fattura2.pdf
         â”‚       â”œâ”€â”€ fattura3.pdf
         â”‚       â”œâ”€â”€ fattura4.pdf
         â”‚       â””â”€â”€ fattura5.pdf
         â”‚
         â””â”€â–º â¬‡ï¸  Invia download al browser
              â”‚
              â–¼

    ğŸ’¾ DOWNLOAD COMPLETATO
         â”‚
         â””â”€â–º richiesta_1_20241208_153045.zip (1.2 MB)
             â”œâ”€â”€ fattura1.pdf  âœ…
             â”œâ”€â”€ fattura2.pdf  âœ…
             â”œâ”€â”€ fattura3.pdf  âœ…
             â”œâ”€â”€ fattura4.pdf  âœ…
             â””â”€â”€ fattura5.pdf  âœ…

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SICUREZZA                                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    ğŸ”’ FILE PROTETTI
         â”‚
         â”œâ”€â–º âŒ NON in public_html
         â”‚       â†’ Nessun URL pubblico
         â”‚       â†’ https://sito.it/uploads/1/file.pdf NON FUNZIONA
         â”‚
         â”œâ”€â–º âœ… Solo FTP puÃ² accedere
         â”‚       â†’ Richiede credenziali Aruba
         â”‚
         â””â”€â–º âœ… API richiede autenticazione
                 â”œâ”€ Verifica sessione
                 â”œâ”€- Verifica ruolo admin
                 â””â”€- Log download

    ğŸ“Š TRACCIAMENTO
         â”‚
         â””â”€â–º Ogni download registrato:
             â”œâ”€ Chi: user_id + email
             â”œâ”€ Cosa: file_id + nome
             â”œâ”€ Quando: timestamp
             â””â”€ Da dove: IP address

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ RIEPILOGO PERCORSO FILE                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    ğŸ‘¤ Cliente              â†’  ğŸŒ Internet  â†’  ğŸ–¥ï¸  Aruba Server
         â”‚                                          â”‚
         â”‚  fattura1.pdf                            â”‚
         â”‚  (nel browser)                           â–¼
         â”‚                                    /tmp/phpXXX (temporaneo)
         â”‚                                          â”‚
         â”‚                                          â–¼
         â”‚                              /home/user/uploads/training/1/
         â”‚                                    67a3b2c1_fattura1.pdf
         â”‚                                          â”‚
         â”‚                                          â–¼
         â”‚                              ğŸ’¾ Database (path salvato)
         â”‚                                          â”‚
         â”‚                                          â”‚
    ğŸ‘¨â€ğŸ’¼ Admin (TU)  â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    ğŸ’¾ Tuo PC
       C:\Downloads\fattura1.pdf

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                            FINE FLUSSO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

NOTA IMPORTANTE:
â€¢ File NON sono pubblici (NON accessibili via URL)
â€¢ Solo TU puoi scaricarli (via FTP o pannello admin)
â€¢ Cliente NON puÃ² scaricare file caricati (solo caricare)
â€¢ Tutti i download sono tracciati nel database

Per domande: Leggi GUIDA_DOWNLOAD_FILE_ARUBA.md
